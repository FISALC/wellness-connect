import{r,j as e}from"./index-CeZ1v-29.js";import{a as y}from"./api-Bbb2V7Rn.js";async function S(s){return(await y.get(s)).data}async function v(s,t){return(await y.put(s,t)).data}async function C(){return S("/api/v1/admin/wellness/profile")}async function k(s){return v("/api/v1/admin/wellness/profile",s)}async function U(s){return v("/api/v1/admin/wellness/profile/password",s)}function F(){const[s,t]=r.useState(null),[i,c]=r.useState(!0),[u,m]=r.useState(!1),[p,l]=r.useState(null),[x,f]=r.useState(""),[o,h]=r.useState(""),[g,b]=r.useState(""),[w,n]=r.useState(null);r.useEffect(()=>{j()},[]);async function j(){try{c(!0);const a=await C();t(a)}catch{l("Failed to load profile.")}finally{c(!1)}}async function N(a){if(a.preventDefault(),!!s){m(!0),l(null);try{const d=await k({fullName:s.fullName,avatarUrl:s.avatarUrl});t(d),l("Profile updated successfully.")}catch(d){l(d.message||"Failed to save profile.")}finally{m(!1)}}}async function P(a){if(a.preventDefault(),n(null),o!==g){n("New passwords do not match.");return}try{await U({currentPassword:x,newPassword:o}),n("Password updated successfully."),f(""),h(""),b("")}catch{n("Failed to update password. Check your current password.")}}return i?e.jsx("div",{children:"Loading profile..."}):s?e.jsxs("section",{className:"space-y-6",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Profile"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your account information."})]}),p&&e.jsx("div",{className:"rounded-md border bg-gray-50 px-3 py-2 text-sm text-gray-700",children:p}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("form",{onSubmit:N,className:"rounded-lg border bg-white p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:s.avatarUrl,alt:"avatar",className:"h-16 w-16 rounded-full border object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Avatar URL"}),e.jsx("input",{className:"w-full rounded-md border px-3 py-2",value:s.avatarUrl,onChange:a=>t({...s,avatarUrl:a.target.value}),placeholder:"https://…"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Full name"}),e.jsx("input",{className:"w-full rounded-md border px-3 py-2",value:s.fullName,onChange:a=>t({...s,fullName:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Email"}),e.jsx("input",{className:"w-full rounded-md border px-3 py-2 bg-gray-50",value:s.email,readOnly:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email is read-only."})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:u,className:"rounded-md bg-gray-900 text-white px-4 py-2 text-sm disabled:opacity-60",children:u?"Saving…":"Save changes"})})]}),e.jsxs("form",{onSubmit:P,className:"rounded-lg border bg-white p-4 space-y-4",children:[e.jsx("h2",{className:"font-medium",children:"Change Password"}),w&&e.jsx("div",{className:"rounded-md border bg-gray-50 px-3 py-2 text-sm text-gray-700",children:w}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Current password"}),e.jsx("input",{type:"password",className:"w-full rounded-md border px-3 py-2",required:!0,value:x,onChange:a=>f(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"New password"}),e.jsx("input",{type:"password",className:"w-full rounded-md border px-3 py-2",required:!0,value:o,onChange:a=>h(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Confirm new password"}),e.jsx("input",{type:"password",className:"w-full rounded-md border px-3 py-2",required:!0,value:g,onChange:a=>b(a.target.value)})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{className:"rounded-md border px-4 py-2 text-sm hover:bg-gray-50",children:"Update password"})})]})]})]}):e.jsx("div",{children:"Error loading profile."})}export{F as default};
