import{r as n,j as e}from"./index-CeZ1v-29.js";import{a as m}from"./api-Bbb2V7Rn.js";const h="/api/v1";async function f(){return(await m.get(`${h}/admin/support/inquiries`)).data}async function p(a,l){await m.put(`${h}/admin/support/inquiries/${a}/status`,{status:l})}const b={New:"bg-blue-100 text-blue-800",Read:"bg-gray-100 text-gray-800",Replied:"bg-green-100 text-green-800",Archived:"bg-yellow-100 text-yellow-800"};function N(){const[a,l]=n.useState([]),[g,x]=n.useState(!0),[t,d]=n.useState(null);n.useEffect(()=>{u()},[]);function u(){x(!0),f().then(l).finally(()=>x(!1))}async function o(s,i){await p(s,i),l(r=>r.map(c=>c.id===s?{...c,status:i}:c)),(t==null?void 0:t.id)===s&&d(r=>r?{...r,status:i}:null)}return g&&!a.length?e.jsx("div",{className:"p-6",children:"Loading inbox..."}):e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col md:flex-row overflow-hidden bg-gray-50",children:[e.jsxs("div",{className:`w-full md:w-1/3 lg:w-1/4 bg-white border-r flex flex-col ${t?"hidden md:flex":"flex"}`,children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Inbox"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.filter(s=>s.status==="New").length," new messages"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:a.map(s=>e.jsxs("div",{onClick:()=>d(s),className:`p-4 border-b cursor-pointer hover:bg-gray-50 transition-colors ${(t==null?void 0:t.id)===s.id?"bg-emerald-50 border-l-4 border-l-emerald-500":"border-l-4 border-l-transparent"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${b[s.status]}`,children:s.status}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.subject}),e.jsx("p",{className:"text-xs text-gray-400 truncate mt-1",children:s.message})]},s.id))})]}),e.jsx("div",{className:`flex-1 flex flex-col bg-white ${t?"flex":"hidden md:flex"}`,children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-start bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("button",{onClick:()=>d(null),className:"md:hidden text-sm text-gray-500 mb-4",children:"‚Üê Back to Inbox"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.subject}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:t.name}),e.jsxs("span",{children:["<",t.email,">"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:t.status,onChange:s=>o(t.id,s.target.value),className:"text-sm border-gray-300 rounded-md shadow-sm focus:border-emerald-500 focus:ring-emerald-500",children:[e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Read",children:"Read"}),e.jsx("option",{value:"Replied",children:"Replied"}),e.jsx("option",{value:"Archived",children:"Archived"})]})})]}),e.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:e.jsx("div",{className:"prose max-w-none text-gray-800 whitespace-pre-wrap",children:t.message})}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium",children:"Reply via Email"}),e.jsx("button",{onClick:()=>o(t.id,"Archived"),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Archive"})]})})]}):e.jsxs("div",{className:"flex-1 flex items-center justify-center text-gray-400 flex-col",children:[e.jsx("span",{className:"text-4xl mb-4",children:"üì©"}),e.jsx("p",{children:"Select a message to view details"})]})})]})}export{N as default};
